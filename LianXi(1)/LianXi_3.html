<!DOCTYPE html>
<html lang="en">  
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>练习3：用键盘操纵坦克移动</title>
		<style type="text/css">
			input{
				font-size:26px;margin-top: 20px;} 
			body{
				background-image: url("img/grassland.png"); overflow: hidden;}  
			#mytank{
				position: absolute;left:10px;top:100px;transition: all 0.2s ease-in-out;}  
		</style>
	</head>
	<body>
		<img id="mytank" src="img/right.png"/>
		<script>
			var tank = document.getElementById('mytank'); 
			var tankWidth = tank.offsetWidth;  
			var tankHeight = tank.offsetHeight;  
			var windowWidth = window.innerWidth;  
			var windowHeight = window.innerHeight;  
			var tankLeft = 10;
			var tankTop = 100;  
			var speed = 10; // 移动速度  
			var tankDirection = 'right'; // 坦克当前方向
			// 初始图片设置  
			setTankImage(tankDirection);  
			// 监听键盘事件  
			document.onkeydown = function(event){  
			// 禁用右键  
			if (event.ctrlKey && event.key==='c'){  
			    return false;}   
			// 根据按键移动坦克和更换图片  
			switch(event.key){  
			    case 'ArrowUp':  
			    case 'w':  
			    tankDirection = 'up';  
			    if (tankTop>speed) {  
			        tankTop-=speed;}  
			    break;  
			    case 'ArrowDown':  
			    case 's':  
			    tankDirection = 'down';  
			    if (tankTop+tankHeight<windowHeight-speed){  
			        tankTop += speed;}  
			    break;  
			    case 'ArrowLeft':  
			    case 'a':  
			    tankDirection = 'left';  
			    if (tankLeft > speed) {  
			        tankLeft -= speed;}  
			    break;  
			    case 'ArrowRight':  
			    case 'd':  
			    tankDirection = 'right'; 
			    if(tankLeft+tankWidth<windowWidth-speed) {  
			        tankLeft+=speed;}  
			    break;
				} 
				//更新坦克位置和图片  
				tank.style.left = tankLeft+'px';  
				tank.style.top = tankTop + 'px';
				setTankImage(tankDirection);  
			};
			// 根据方向设置坦克图片  
			function setTankImage(direction) {  
			var imagePath ='img/';  
			switch(direction){  
			    case 'up':  
					imagePath += 'up.png';  
					break;  
			    case 'down':  
					imagePath += 'down.png';  
			        break;  
			    case 'left':  
			        imagePath += 'left.png';  
			        break;  
			    case 'right':  
			        imagePath += 'right.png';  
			        break;  
			    default:  
			        imagePath += 'right.png';//默认图片  
			        }  
			    tank.src = imagePath;  
			    }
			// 监听窗口大小变化事件  
			window.onresize = function() {  
			    windowWidth = window.innerWidth;  
			    windowHeight = window.innerHeight;  
			    };  
		</script>
	</body>
</html>